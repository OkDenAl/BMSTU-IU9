% Лабораторная работа № 3 «Обобщённые классы в Scala»
% 20 марта 2024 г.
% Денис Окутин, ИУ9-61Б

# Цель работы
Целью данной работы является приобретение навыков разработки обобщённых 
классов на языке Scala с использованием неявных преобразований типов.

# Индивидуальный вариант
Класс Fib[T], представляющий i-й член последовательности Фибоначчи типа T. 
Конструктор класса Fib[T] принимает два первых члена последовательности и создаёт объект,
соответствующий первому члену. Метод next возвращает новый объект, соответствующий следующему члену.
Если тип T — целочисленный, то очередной член последовательности вычисляется как сумма двух предыдущих.
Если тип T — строка, то вместо сложения используется конкатенация.

# Реализация и тестирование

```scala
trait Addable[T] {
  def add(x: T, y: T): T
}

object Addable {
  implicit object IntAddable extends Addable[Int] {
    def add(x: Int, y: Int): Int = x + y
  }

  implicit object StringAddable extends Addable[String] {
    def add(x: String, y: String): String = x + y
  }
}

class Fib[T](val current: T, val nextVal: T)(implicit ev: Addable[T]) {
  def next(): Fib[T] = new Fib[T](nextVal, ev.add(current, nextVal))
}


object Main {
  private def printNFib[T](start1: T, start2: T, n: Int)(implicit ev: Addable[T]): Unit = {
    var fib = new Fib[T](start1, start2)
    for (i <- 1 to n) {
      printf("\t%d-й член Фибоначчи: %s\n",i,fib.current)
      fib = fib.next()
    }
  }

  def main(args: Array[String]): Unit = {
    println("Последовательность Фибоначчи целых чисел:")
    printNFib[Int](0, 1, 10)

    println("\nПоследовательность Фибоначчи строк:")
    printNFib[String]("A", "B", 5)
  }
}
```

Вывод на `stdout`

```
Последовательность Фибоначчи целых чисел:
	1-й член Фибоначчи: 0
	2-й член Фибоначчи: 1
	3-й член Фибоначчи: 1
	4-й член Фибоначчи: 2
	5-й член Фибоначчи: 3
	6-й член Фибоначчи: 5
	7-й член Фибоначчи: 8
	8-й член Фибоначчи: 13
	9-й член Фибоначчи: 21
	10-й член Фибоначчи: 34

Последовательность Фибоначчи строк:
	1-й член Фибоначчи: A
	2-й член Фибоначчи: B
	3-й член Фибоначчи: AB
	4-й член Фибоначчи: BAB
	5-й член Фибоначчи: ABBAB
```

# Вывод
В ходе данной лабораторной работы были приобретены навыки разработки обощенных
классов на языке Scala c использованием неявных преобразований типов.
Также были изучены выразительные возможности языка Scala, позволяющие написать
немногословный, но при этом поддерживающий строки и любые целочисленные типы языка Scala, код.